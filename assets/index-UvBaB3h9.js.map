{"version":3,"file":"index-UvBaB3h9.js","sources":["../../src/services/api.ts","../../src/utils.ts","../../src/services/storage.ts","../../src/state.ts","../../src/components/document-ui.ts","../../src/components/message-ui.ts","../../src/app.ts","../../src/main.ts"],"sourcesContent":["// src/services/api.ts\n\nexport class ApiClient {\n    private baseUrl: string;\n    private apiKey: string | null;\n    private sessionId: string | null;\n\n    constructor() {\n        this.baseUrl = \"https://gemini-rag-c8ng.onrender.com/\"; \n        \n        this.apiKey = localStorage.getItem(\"rag_api_key\");\n        this.sessionId = localStorage.getItem(\"rag_session_id\");\n\n        if (!this.sessionId) {\n            this.sessionId = crypto.randomUUID();\n            localStorage.setItem(\"rag_session_id\", this.sessionId);\n        }\n    }\n\n    setApiKey(key: string) {\n        this.apiKey = key;\n        localStorage.setItem(\"rag_api_key\", key);\n    }\n\n    getApiKey(): string | null {\n        return this.apiKey;\n    }\n\n    logout() {\n        this.apiKey = null;\n        localStorage.removeItem(\"rag_api_key\");\n    }\n\n    async checkHealth(): Promise<boolean> {\n        try {\n            const res = await fetch(`${this.baseUrl}/`);\n            return res.ok;\n        } catch (error) {\n            return false;\n        }\n    }\n\n    async uploadFile(file: File): Promise<any> {\n        const formData = new FormData();\n        formData.append(\"file\", file);\n\n        const res = await fetch(`${this.baseUrl}/upload`, {\n            method: \"POST\",\n            headers: {\n                \"X-Api-Key\": this.apiKey || \"\",\n                \"X-Session-ID\": this.sessionId || \"\"\n            },\n            body: formData\n        });\n\n        return res.json();\n    }\n\n    async askQuestion(question: string): Promise<any> {\n        const res = await fetch(`${this.baseUrl}/ask`, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"X-Api-Key\": this.apiKey || \"\",\n                \"X-Session-ID\": this.sessionId || \"\"\n            },\n            body: JSON.stringify({ question })\n        });\n\n        return res.json();\n    }\n}","import { Message } from './types';\n\nexport function generateId(): string {\n  return Math.random().toString(36).substr(2, 9);\n}\n\nexport function generateSessionId(): string {\n  return `session_${generateId()}_${Date.now()}`;\n}\n\nexport function formatFileSize(bytes: number): string {\n  if (bytes === 0) return '0 Bytes';\n\n  const k = 1024;\n  const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n  return Math.round((bytes / Math.pow(k, i)) * 100) / 100 + ' ' + sizes[i];\n}\n\nexport function formatTime(date: Date): string {\n  return date.toLocaleTimeString('en-US', {\n    hour: '2-digit',\n    minute: '2-digit',\n    hour12: true,\n  });\n}\n\nexport function escapeHtml(text: string): string {\n  const map: Record<string, string> = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#039;',\n  };\n  return text.replace(/[&<>\"']/g, (char) => map[char]);\n}\n\nexport function createMessage(\n  text: string,\n  sender: 'user' | 'assistant'\n): Message {\n  return {\n    id: generateId(),\n    text,\n    sender,\n    time: new Date(),\n  };\n}\n\nexport function debounce<T extends (...args: any[]) => any>(\n  func: T,\n  wait: number\n): (...args: Parameters<T>) => void {\n  let timeout: ReturnType<typeof setTimeout>;\n\n  return function executedFunction(...args: Parameters<T>) {\n    const later = () => {\n      clearTimeout(timeout);\n      func(...args);\n    };\n\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n  };\n}\n\nexport function truncateText(text: string, maxLength: number): string {\n  if (text.length <= maxLength) return text;\n  return text.slice(0, maxLength) + '...';\n}\n","import { ApiConfig } from '../types';\n\nconst STORAGE_PREFIX = 'rag_app_';\n\nexport const storageKeys = {\n  endpoint: `${STORAGE_PREFIX}endpoint`,\n  apiKey: `${STORAGE_PREFIX}api_key`,\n  sessionId: `${STORAGE_PREFIX}session_id`,\n};\n\nexport function saveConfig(config: Partial<ApiConfig>): void {\n  if (config.API_ENDPOINT) {\n    localStorage.setItem(storageKeys.endpoint, config.API_ENDPOINT);\n  }\n  if (config.API_KEY) {\n    localStorage.setItem(storageKeys.apiKey, config.API_KEY);\n  }\n}\n\nexport function loadConfig(): ApiConfig {\n  return {\n    API_ENDPOINT: localStorage.getItem(storageKeys.endpoint) || 'http://localhost:5000',\n    API_KEY: localStorage.getItem(storageKeys.apiKey) || '',\n  };\n}\n\nexport function saveSessionId(sessionId: string): void {\n  localStorage.setItem(storageKeys.sessionId, sessionId);\n}\n\nexport function loadSessionId(): string | null {\n  return localStorage.getItem(storageKeys.sessionId);\n}\n\nexport function clearSession(): void {\n  localStorage.removeItem(storageKeys.sessionId);\n}\n","import { AppState, ApiConfig, Document } from './types';\nimport { generateSessionId, generateId } from './utils';\nimport { loadConfig, loadSessionId, saveSessionId } from './services/storage';\n\nexport class AppStateManager {\n  private state: AppState;\n  private config: ApiConfig;\n  private listeners: ((state: AppState, config: ApiConfig) => void)[] = [];\n\n  constructor() {\n    this.config = loadConfig();\n    const savedSessionId = loadSessionId();\n\n    this.state = {\n      sessionId: savedSessionId || generateSessionId(),\n      currentDocument: null,\n      isLoading: false,\n      messages: [],\n      hasDocument: false,\n    };\n\n    saveSessionId(this.state.sessionId);\n  }\n\n  getState(): AppState {\n    return { ...this.state };\n  }\n\n  getConfig(): ApiConfig {\n    return { ...this.config };\n  }\n\n  setConfig(config: Partial<ApiConfig>): void {\n    this.config = { ...this.config, ...config };\n    this.notifyListeners();\n  }\n\n  setDocument(doc: Document | null): void {\n    this.state.currentDocument = doc;\n    this.state.hasDocument = !!doc;\n    this.notifyListeners();\n  }\n\n  getDocument(): Document | null {\n    return this.state.currentDocument;\n  }\n\n  setLoading(isLoading: boolean): void {\n    this.state.isLoading = isLoading;\n    this.notifyListeners();\n  }\n\n  addMessage(text: string, sender: 'user' | 'assistant'): void {\n    this.state.messages.push({\n      id: generateId(),\n      text,\n      sender,\n      time: new Date(),\n    });\n    this.notifyListeners();\n  }\n\n  getMessages() {\n    return [...this.state.messages];\n  }\n\n  clearMessages(): void {\n    this.state.messages = [];\n    this.notifyListeners();\n  }\n\n  newSession(): void {\n    this.state.sessionId = generateSessionId();\n    this.state.currentDocument = null;\n    this.state.hasDocument = false;\n    this.state.messages = [];\n    saveSessionId(this.state.sessionId);\n    this.notifyListeners();\n  }\n\n  subscribe(\n    listener: (state: AppState, config: ApiConfig) => void\n  ): () => void {\n    this.listeners.push(listener);\n\n    return () => {\n      this.listeners = this.listeners.filter((l) => l !== listener);\n    };\n  }\n\n  private notifyListeners(): void {\n    this.listeners.forEach((listener) => {\n      listener(this.getState(), this.getConfig());\n    });\n  }\n}\n","import { Document } from '../types';\nimport { formatFileSize } from '../utils';\n\nexport class DocumentUI {\n  static renderDocumentItem(doc: Document, onRemove?: () => void): HTMLElement {\n    const container = document.createElement('div');\n    container.className = 'document-item';\n\n    const name = document.createElement('div');\n    name.className = 'document-name';\n    name.textContent = `üìã ${doc.name}`;\n\n    const meta = document.createElement('div');\n    meta.className = 'document-meta';\n    meta.innerHTML = `\n      <strong>Size:</strong> ${formatFileSize(doc.size)}<br>\n      <strong>Chunks:</strong> ${doc.chunks}<br>\n      <strong>Uploaded:</strong> ${doc.uploadedAt.toLocaleTimeString()}\n    `;\n\n    const badge = document.createElement('span');\n    badge.className = 'badge badge-success';\n    badge.textContent = '‚úì Ready';\n\n    container.appendChild(name);\n    container.appendChild(meta);\n    container.appendChild(badge);\n\n    if (onRemove) {\n      const actions = document.createElement('div');\n      actions.className = 'document-actions';\n\n      const removeBtn = document.createElement('button');\n      removeBtn.className = 'btn btn-danger btn-sm';\n      removeBtn.textContent = 'üóëÔ∏è Remove';\n      removeBtn.addEventListener('click', onRemove);\n\n      actions.appendChild(removeBtn);\n      container.appendChild(actions);\n    }\n\n    return container;\n  }\n\n  static renderEmptyState(): HTMLElement {\n    const container = document.createElement('div');\n    container.className = 'empty-state';\n\n    const icon = document.createElement('div');\n    icon.className = 'empty-state-icon';\n    icon.textContent = 'üí¨';\n\n    const text = document.createElement('p');\n    text.textContent = 'Upload a document and start asking questions!';\n\n    container.appendChild(icon);\n    container.appendChild(text);\n\n    return container;\n  }\n\n  static renderNoDocuments(): HTMLElement {\n    const container = document.createElement('div');\n    container.className = 'empty-documents';\n    container.textContent = 'No documents loaded yet';\n\n    return container;\n  }\n}\n","import { Message } from '../types';\nimport { formatTime, escapeHtml } from '../utils';\n\nexport class MessageUI {\n  /**\n   * Format AI response text with better readability\n   * Supports basic markdown and improves text structure\n   */\n  private static formatAIResponse(text: string): string {\n    // Ensure text is a string\n    if (!text || typeof text !== 'string') {\n      return '<div class=\"text-paragraph\">Unable to display message</div>';\n    }\n\n    // Escape HTML first\n    let formatted = escapeHtml(text);\n    \n    // Convert to string if needed\n    formatted = String(formatted);\n\n    // Convert markdown-style formatting\n    // Bold: **text** -> <strong>text</strong>\n    formatted = formatted.replace(/\\*\\*(.+?)\\*\\*/g, '<strong>$1</strong>');\n    \n    // Italic: *text* -> <em>text</em>\n    formatted = formatted.replace(/\\*(.+?)\\*/g, '<em>$1</em>');\n    \n    // Inline code: `code` -> <code>code</code>\n    formatted = formatted.replace(/`([^`]+)`/g, '<code>$1</code>');\n\n    // Convert numbered lists: \"1. item\" -> proper list\n    formatted = formatted.replace(\n      /(\\d+)\\.\\s+([^\\n]+)/g,\n      '<div class=\"list-item numbered-item\"><span class=\"item-number\">$1.</span> $2</div>'\n    );\n\n    // Convert bullet lists: \"- item\" or \"‚Ä¢ item\" -> proper list\n    formatted = formatted.replace(\n      /[-‚Ä¢]\\s+([^\\n]+)/g,\n      '<div class=\"list-item bullet-item\"><span class=\"bullet\">‚Ä¢</span> $1</div>'\n    );\n\n    // Convert line breaks to actual breaks for readability\n    formatted = formatted.replace(/\\n\\n+/g, '</div><div class=\"text-paragraph\">');\n    formatted = formatted.replace(/\\n/g, '<br />');\n\n    // Wrap in paragraph divs\n    formatted = `<div class=\"text-paragraph\">${formatted}</div>`;\n\n    // Convert code blocks: ```code``` -> <pre><code>\n    formatted = formatted.replace(\n      /```([\\s\\S]*?)```/g,\n      '<pre class=\"code-block\"><code>$1</code></pre>'\n    );\n\n    return formatted;\n  }\n\n  static renderMessage(message: Message): HTMLElement {\n    const container = document.createElement('div');\n    container.className = `message ${message.sender}`;\n\n    const avatar = document.createElement('div');\n    avatar.className = 'message-avatar';\n    avatar.textContent = message.sender === 'user' ? 'You' : 'AI';\n\n    const wrapper = document.createElement('div');\n    wrapper.className = 'message-wrapper';\n\n    const content = document.createElement('div');\n    content.className = 'message-content';\n    \n    // Ensure message.text is a string\n    const messageText = String(message.text || '');\n    \n    // Use formatted response for AI messages, plain text for user\n    if (message.sender === 'assistant') {\n      content.innerHTML = this.formatAIResponse(messageText);\n    } else {\n      content.innerHTML = escapeHtml(messageText);\n    }\n\n    const time = document.createElement('div');\n    time.className = 'message-time';\n    time.textContent = formatTime(message.time);\n\n    wrapper.appendChild(content);\n    wrapper.appendChild(time);\n    container.appendChild(avatar);\n    container.appendChild(wrapper);\n\n    return container;\n  }\n\n  static renderLoadingMessage(): HTMLElement {\n    const container = document.createElement('div');\n    container.className = 'message assistant';\n\n    const avatar = document.createElement('div');\n    avatar.className = 'message-avatar';\n    avatar.textContent = 'A';\n\n    const wrapper = document.createElement('div');\n    wrapper.className = 'message-wrapper';\n\n    const content = document.createElement('div');\n    content.className = 'message-content';\n\n    const dots = document.createElement('div');\n    dots.className = 'loading-dots';\n\n    for (let i = 0; i < 3; i++) {\n      const dot = document.createElement('div');\n      dot.className = 'loading-dot';\n      dots.appendChild(dot);\n    }\n\n    content.appendChild(dots);\n    wrapper.appendChild(content);\n    container.appendChild(avatar);\n    container.appendChild(wrapper);\n\n    return container;\n  }\n\n  static renderStatusMessage(\n    message: string,\n    type: 'success' | 'error' | 'info' | 'warning'\n  ): HTMLElement {\n    const container = document.createElement('div');\n    container.className = `status-message ${type}`;\n\n    const iconMap = {\n      success: '‚úÖ',\n      error: '‚ùå',\n      info: '‚ÑπÔ∏è',\n      warning: '‚ö†Ô∏è',\n    };\n\n    const icon = document.createElement('span');\n    icon.textContent = iconMap[type];\n\n    const text = document.createElement('span');\n    text.textContent = message;\n\n    container.appendChild(icon);\n    container.appendChild(text);\n\n    return container;\n  }\n}\n","import { ApiClient } from \"./services/api\"; // Certo (procura dentro do src)\nimport { AppStateManager } from './state';\nimport { DocumentUI } from './components/document-ui';\nimport { MessageUI } from './components/message-ui';\nimport { saveConfig } from './services/storage';\nimport { truncateText } from './utils';\n\nexport class RagChatApp {\n  private stateManager: AppStateManager;\n  private apiClient: ApiClient;\n  private elements: Record<string, HTMLElement | null> = {};\n  private currentLoadingMessage: HTMLElement | null = null;\n\n  constructor() {\n    this.stateManager = new AppStateManager();\n    const config = this.stateManager.getConfig();\n    this.apiClient = new ApiClient();\n    this.apiClient.setApiKey(config.API_KEY);\n    this.cacheElements();\n    this.setupEventListeners();\n    this.render();\n\n    // Subscribe to state changes\n    this.stateManager.subscribe(() => this.render());\n  }\n\n  private cacheElements(): void {\n    const elementIds = [\n      'apiEndpoint',\n      'apiKey',\n      'sessionId',\n      'uploadZone',\n      'fileInput',\n      'documentsList',\n      'messagesContainer',\n      'questionInput',\n      'askBtn',\n      'clearBtn',\n      'newSessionBtn',\n      'statusMessages',\n      'settingsBtn',\n    ];\n\n    elementIds.forEach((id) => {\n      this.elements[id] = document.getElementById(id);\n    });\n  }\n\n  private setupEventListeners(): void {\n    // Config inputs\n    this.elements['apiEndpoint']?.addEventListener('change', (e) => {\n      const endpoint = (e.target as HTMLInputElement).value;\n      this.stateManager.setConfig({ API_ENDPOINT: endpoint });\n      saveConfig({ API_ENDPOINT: endpoint });\n      this.showStatus('API endpoint updated', 'success');\n    });\n\n    this.elements['apiKey']?.addEventListener('change', (e) => {\n      const key = (e.target as HTMLInputElement).value;\n      this.stateManager.setConfig({ API_KEY: key });\n      this.apiClient.setApiKey(key);\n      saveConfig({ API_KEY: key });\n      this.showStatus('API key updated', 'success');\n    });\n\n    // Upload zone\n    this.elements['uploadZone']?.addEventListener('click', () => {\n      this.elements['fileInput']?.click();\n    });\n\n    this.elements['fileInput']?.addEventListener('change', (e) => {\n      const file = (e.target as HTMLInputElement).files?.[0];\n      if (file) {\n        this.handleUpload(file);\n        (e.target as HTMLInputElement).value = '';\n      }\n    });\n\n    // Drag and drop\n    this.elements['uploadZone']?.addEventListener('dragover', (e) => {\n      e.preventDefault();\n      this.elements['uploadZone']?.classList.add('dragover');\n    });\n\n    this.elements['uploadZone']?.addEventListener('dragleave', () => {\n      this.elements['uploadZone']?.classList.remove('dragover');\n    });\n\n    this.elements['uploadZone']?.addEventListener('drop', (e) => {\n      e.preventDefault();\n      this.elements['uploadZone']?.classList.remove('dragover');\n      const file = e.dataTransfer?.files?.[0];\n      if (file) {\n        this.handleUpload(file);\n      }\n    });\n\n    // Question input\n    this.elements['questionInput']?.addEventListener('keydown', (e) => {\n      if (e.key === 'Enter' && !e.shiftKey) {\n        e.preventDefault();\n        const state = this.stateManager.getState();\n        if (!state.isLoading) {\n          this.handleQuestion();\n        }\n      }\n    });\n\n    // Buttons\n    this.elements['askBtn']?.addEventListener('click', () => {\n      const state = this.stateManager.getState();\n      if (!state.isLoading) {\n        this.handleQuestion();\n      }\n    });\n\n    this.elements['clearBtn']?.addEventListener('click', () => {\n      const input = this.elements['questionInput'] as HTMLTextAreaElement;\n      if (input) {\n        input.value = '';\n      }\n      this.stateManager.clearMessages();\n    });\n\n    this.elements['newSessionBtn']?.addEventListener('click', () => {\n      if (confirm('Start a new session? (Current document will be cleared)')) {\n        this.stateManager.newSession();\n        this.render();\n        this.showStatus('New session created', 'success');\n      }\n    });\n\n    this.elements['settingsBtn']?.addEventListener('click', () => {\n      this.showSettings();\n    });\n  }\n\n  private async handleUpload(file: File): Promise<void> {\n    const state = this.stateManager.getState();\n    const config = this.stateManager.getConfig();\n\n    if (!config.API_KEY) {\n      this.showStatus('Please set your API Key first', 'error');\n      return;\n    }\n\n    const uploadZone = this.elements['uploadZone'];\n    const originalContent = uploadZone?.innerHTML;\n\n    try {\n      this.stateManager.setLoading(true);\n      uploadZone!.innerHTML = '<div class=\"spinner\"></div>';\n\n      this.apiClient.setApiKey(config.API_KEY);\n      const response = await this.apiClient.uploadFile(file);\n\n      this.stateManager.setDocument({\n        name: file.name,\n        size: file.size,\n        uploadedAt: new Date(),\n        chunks: response.total_chunks,\n      });\n\n      this.showStatus(\n        `Document uploaded successfully! (${response.total_chunks} chunks)`,\n        'success'\n      );\n      this.stateManager.clearMessages();\n    } catch (error) {\n      this.showStatus(\n        `Upload failed: ${error instanceof Error ? error.message : 'Unknown error'}`,\n        'error'\n      );\n    } finally {\n      this.stateManager.setLoading(false);\n      if (uploadZone) {\n        uploadZone.innerHTML = originalContent || '';\n      }\n    }\n  }\n\n  private async handleQuestion(): Promise<void> {\n    const state = this.stateManager.getState();\n    const config = this.stateManager.getConfig();\n    const input = this.elements['questionInput'] as HTMLTextAreaElement;\n    const question = input?.value.trim() || '';\n\n    if (!question) {\n      this.showStatus('Please enter a question', 'error');\n      return;\n    }\n\n    if (!state.hasDocument) {\n      this.showStatus('Please upload a document first', 'error');\n      return;\n    }\n\n    if (!config.API_KEY) {\n      this.showStatus('Please set your API Key first', 'error');\n      return;\n    }\n\n    try {\n      this.stateManager.setLoading(true);\n      const askBtn = this.elements['askBtn'] as HTMLButtonElement;\n      if (askBtn) askBtn.disabled = true;\n\n      // Add user message\n      this.stateManager.addMessage(question, 'user');\n      if (input) input.value = '';\n\n      // Add loading message\n      const messagesContainer = this.elements['messagesContainer'];\n      this.currentLoadingMessage = MessageUI.renderLoadingMessage();\n      messagesContainer?.appendChild(this.currentLoadingMessage);\n      this.scrollToBottom();\n\n      // Get response\n      this.apiClient.setApiKey(config.API_KEY);\n      const response = await this.apiClient.askQuestion(question);\n\n      // Debug: log the response to see what we're getting\n      console.log('API Response:', response);\n\n      // Remove loading message and add actual response\n      this.currentLoadingMessage?.remove();\n      \n      // Extract answer from response - handle different formats\n      const answerText = response?.answer || response?.text || response?.response || '';\n      \n      if (answerText && typeof answerText === 'string' && answerText.trim()) {\n        this.stateManager.addMessage(answerText, 'assistant');\n      } else {\n        console.error('Invalid response format:', response);\n        this.showStatus('Invalid response from API', 'error');\n      }\n    } catch (error) {\n      this.currentLoadingMessage?.remove();\n      this.showStatus(\n        `Error: ${error instanceof Error ? error.message : 'Unknown error'}`,\n        'error'\n      );\n    } finally {\n      this.stateManager.setLoading(false);\n      const askBtn = this.elements['askBtn'] as HTMLButtonElement;\n      if (askBtn) askBtn.disabled = false;\n      (this.elements['questionInput'] as HTMLTextAreaElement)?.focus();\n    }\n  }\n\n  private render(): void {\n    this.renderConfig();\n    this.renderSessionInfo();\n    this.renderDocuments();\n    this.renderMessages();\n    this.updateButtonStates();\n  }\n\n  private renderConfig(): void {\n    const config = this.stateManager.getConfig();\n    const apiEndpoint = this.elements['apiEndpoint'] as HTMLInputElement;\n    const apiKey = this.elements['apiKey'] as HTMLInputElement;\n\n    if (apiEndpoint && apiEndpoint.value !== config.API_ENDPOINT) {\n      apiEndpoint.value = config.API_ENDPOINT;\n    }\n\n    if (apiKey && apiKey.value !== config.API_KEY) {\n      apiKey.value = config.API_KEY;\n    }\n  }\n\n  private renderSessionInfo(): void {\n    const state = this.stateManager.getState();\n    const sessionIdEl = this.elements['sessionId'];\n    if (sessionIdEl) {\n      sessionIdEl.textContent = state.sessionId;\n      sessionIdEl.title = state.sessionId;\n    }\n  }\n\n  private renderDocuments(): void {\n    const state = this.stateManager.getState();\n    const container = this.elements['documentsList'];\n\n    if (!container) return;\n\n    container.innerHTML = '';\n\n    if (!state.currentDocument) {\n      container.appendChild(DocumentUI.renderNoDocuments());\n    } else {\n      container.appendChild(DocumentUI.renderDocumentItem(state.currentDocument));\n    }\n  }\n\n  private renderMessages(): void {\n    const state = this.stateManager.getState();\n    const container = this.elements['messagesContainer'];\n\n    if (!container) return;\n\n    if (state.messages.length === 0) {\n      container.innerHTML = '';\n      container.appendChild(DocumentUI.renderEmptyState());\n    } else {\n      container.innerHTML = '';\n      state.messages.forEach((message) => {\n        container.appendChild(MessageUI.renderMessage(message));\n      });\n      this.scrollToBottom();\n    }\n  }\n\n  private updateButtonStates(): void {\n    const state = this.stateManager.getState();\n    const askBtn = this.elements['askBtn'] as HTMLButtonElement;\n    const clearBtn = this.elements['clearBtn'] as HTMLButtonElement;\n    const input = this.elements['questionInput'] as HTMLTextAreaElement;\n\n    if (askBtn) askBtn.disabled = state.isLoading || !state.hasDocument;\n    if (clearBtn) clearBtn.disabled = state.isLoading;\n    if (input) input.disabled = state.isLoading;\n  }\n\n  private showStatus(message: string, type: 'success' | 'error' | 'info' | 'warning'): void {\n    const container = this.elements['statusMessages'];\n    if (!container) return;\n\n    const statusEl = MessageUI.renderStatusMessage(message, type);\n    container.innerHTML = '';\n    container.appendChild(statusEl);\n\n    setTimeout(() => {\n      if (container.contains(statusEl)) {\n        statusEl.remove();\n      }\n    }, 5000);\n  }\n\n  private showSettings(): void {\n    const state = this.stateManager.getState();\n    const config = this.stateManager.getConfig();\n\n    alert(\n      `RAG Chat - Settings\\n\\n` +\n        `API Endpoint: ${config.API_ENDPOINT}\\n` +\n        `API Key: ${config.API_KEY ? '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢' : 'Not set'}\\n` +\n        `Session ID: ${truncateText(state.sessionId, 20)}\\n\\n` +\n        `Update the API endpoint and key in the header to change settings.`\n    );\n  }\n\n  private scrollToBottom(): void {\n    const container = this.elements['messagesContainer'];\n    if (container) {\n      setTimeout(() => {\n        container.scrollTop = container.scrollHeight;\n      }, 0);\n    }\n  }\n\n  static initialize(): void {\n    const init = () => {\n      new RagChatApp();\n      console.log('üß† RAG Chat Application initialized');\n    };\n\n    // Check if DOM is already loaded\n    if (document.readyState === 'loading') {\n      document.addEventListener('DOMContentLoaded', init);\n    } else {\n      // DOM is already loaded\n      init();\n    }\n  }\n}\n","import './styles/globals.css';\nimport './styles/layout.css';\nimport './styles/premium.css';\nimport { RagChatApp } from './app';\n\n// Initialize the application\nRagChatApp.initialize();\n"],"names":["ApiClient","constructor","__publicField","this","baseUrl","apiKey","localStorage","getItem","sessionId","crypto","randomUUID","setItem","setApiKey","key","getApiKey","logout","removeItem","checkHealth","fetch","ok","error","uploadFile","file","formData","FormData","append","method","headers","body","json","askQuestion","question","JSON","stringify","generateId","Math","random","toString","substr","generateSessionId","Date","now","escapeHtml","text","map","replace","char","STORAGE_PREFIX","storageKeys","endpoint","saveConfig","config","API_ENDPOINT","API_KEY","saveSessionId","AppStateManager","savedSessionId","state","currentDocument","isLoading","messages","hasDocument","getState","getConfig","setConfig","notifyListeners","setDocument","doc","getDocument","setLoading","addMessage","sender","push","id","time","getMessages","clearMessages","newSession","subscribe","listener","listeners","filter","l","forEach","DocumentUI","renderDocumentItem","onRemove","container","document","createElement","className","name","textContent","meta","innerHTML","bytes","i","floor","log","round","pow","formatFileSize","size","chunks","uploadedAt","toLocaleTimeString","badge","appendChild","actions","removeBtn","addEventListener","renderEmptyState","icon","renderNoDocuments","MessageUI","formatAIResponse","formatted","String","renderMessage","message","avatar","wrapper","content","messageText","hour","minute","hour12","renderLoadingMessage","dots","dot","renderStatusMessage","type","success","info","warning","RagChatApp","stateManager","apiClient","cacheElements","setupEventListeners","render","elements","getElementById","_a","e","target","value","showStatus","_b","_c","click","_d","files","handleUpload","_e","preventDefault","classList","add","_f","remove","_g","dataTransfer","_h","shiftKey","handleQuestion","_i","_j","input","_k","confirm","_l","showSettings","uploadZone","originalContent","response","total_chunks","Error","trim","askBtn","disabled","messagesContainer","currentLoadingMessage","scrollToBottom","console","answerText","answer","focus","renderConfig","renderSessionInfo","renderDocuments","renderMessages","updateButtonStates","apiEndpoint","sessionIdEl","title","length","clearBtn","statusEl","setTimeout","contains","maxLength","alert","slice","scrollTop","scrollHeight","initialize","init","readyState"],"mappings":"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"}